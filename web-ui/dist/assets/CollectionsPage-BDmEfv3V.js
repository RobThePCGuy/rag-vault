import{a,j as e}from"./query-DPt-uCb6.js";import{k as D,C as O,m as w}from"./index-D068MV_o.js";import{A as b,m as N}from"./motion-CKwJwI3J.js";import{u as M}from"./vendor-C2QPsZ3S.js";function B(){const{collections:s,createCollection:n,updateCollection:o,deleteCollection:h,getCollection:p,getDocumentsInCollection:f}=D();return{collections:s,createCollection:n,updateCollection:o,deleteCollection:h,getCollection:p,getDocumentsInCollection:f}}function R(){const s=M(),{collections:n,createCollection:o,updateCollection:h,deleteCollection:p,getDocumentsInCollection:f}=B(),[l,d]=a.useState(!1),[m,u]=a.useState(null),[r,i]=a.useState(""),[v,c]=a.useState(""),[x,j]=a.useState("blue"),g=()=>{d(!0),u(null),i(""),c(""),j("blue")},L=t=>{d(!1),u(t.id),i(t.name),c(t.description||""),j(t.color)},S=()=>{r.trim()&&(l?o(r.trim(),x,v.trim()||void 0):m&&h(m,{name:r.trim(),color:x,description:v.trim()||void 0}),d(!1),u(null),i(""),c(""))},I=()=>{d(!1),u(null),i(""),c("")},E=t=>{s(`/files?collection=${t}`)};return e.jsxs("div",{className:"ws-page max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"ws-page-title text-2xl font-bold mb-2",children:"Collections"}),e.jsx("p",{style:{color:"var(--ws-text-secondary)"},children:"Organize your documents into collections."})]}),!l&&!m&&e.jsxs("button",{type:"button",onClick:g,className:"ws-button flex items-center gap-2 px-4 py-2 rounded-lg transition-colors","data-variant":"primary",children:[e.jsx(k,{className:"w-4 h-4"}),"New Collection"]})]}),e.jsx(b,{children:(l||m)&&e.jsxs(N.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"ws-surface p-4 space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",style:{color:"var(--ws-text)"},children:l?"Create Collection":"Edit Collection"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--ws-text-secondary)"},children:["Name",e.jsx("input",{type:"text",value:r,onChange:t=>i(t.target.value),placeholder:"Collection name",className:"ws-input mt-1"})]})}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-sm font-medium mb-1",style:{color:"var(--ws-text-secondary)"},children:"Color"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:O.map(t=>e.jsx("button",{type:"button",onClick:()=>j(t),className:`w-8 h-8 rounded-full ${w[t].bg} ${x===t?"ring-2 ring-offset-2":""}`,style:x===t?{"--tw-ring-color":"var(--ws-accent)","--tw-ring-offset-color":"var(--ws-surface-2)"}:void 0},t))})]})]}),e.jsx("div",{children:e.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--ws-text-secondary)"},children:["Description (optional)",e.jsx("input",{type:"text",value:v,onChange:t=>c(t.target.value),placeholder:"What's this collection for?",className:"ws-input mt-1"})]})}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{type:"button",onClick:I,className:"ws-button px-4 py-2 text-sm rounded-lg transition-colors","data-variant":"default",children:"Cancel"}),e.jsx("button",{type:"button",onClick:S,disabled:!r.trim(),className:"ws-button px-4 py-2 text-sm rounded-lg transition-colors","data-variant":"primary",children:l?"Create":"Save"})]})]})}),n.length===0?e.jsxs("div",{className:"ws-surface text-center py-12",children:[e.jsx(W,{className:"w-12 h-12 mx-auto mb-3",style:{color:"var(--ws-text-faint)"}}),e.jsx("h3",{className:"text-lg font-medium mb-1",style:{color:"var(--ws-text)"},children:"No collections yet"}),e.jsx("p",{className:"mb-4",style:{color:"var(--ws-text-muted)"},children:"Create a collection to organize your documents."}),e.jsxs("button",{type:"button",onClick:g,className:"ws-button inline-flex items-center gap-2 px-4 py-2 rounded-lg transition-colors","data-variant":"primary",children:[e.jsx(k,{className:"w-4 h-4"}),"Create your first collection"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsx(b,{children:n.map(t=>{const y=f(t.id),C=w[t.color];return e.jsxs(N.div,{layout:!0,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:`rounded-lg p-4 ${C.border}`,style:{background:"var(--ws-surface-2)",border:"1px solid"},children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`w-4 h-4 rounded-full ${C.bg}`}),e.jsx("h3",{className:"text-lg font-medium",style:{color:"var(--ws-text)"},children:t.name})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{type:"button",onClick:()=>L(t),className:"p-1.5 rounded transition-colors",style:{color:"var(--ws-text-faint)"},title:"Edit",children:e.jsx($,{className:"w-4 h-4"})}),e.jsx(H,{onDelete:()=>p(t.id)})]})]}),t.description&&e.jsx("p",{className:"text-sm mb-3",style:{color:"var(--ws-text-muted)"},children:t.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm",style:{color:"var(--ws-text-muted)"},children:[y.length," document",y.length!==1?"s":""]}),e.jsx("button",{type:"button",onClick:()=>E(t.id),className:"text-sm hover:underline",style:{color:"var(--ws-accent)"},children:"View documents â†’"})]})]},t.id)})})})]})}function H({onDelete:s}){const[n,o]=a.useState(!1);return n?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{type:"button",onClick:s,className:"px-2 py-1 text-xs font-medium rounded transition-colors",style:{color:"var(--ws-danger)",background:"var(--ws-danger-muted)"},children:"Delete"}),e.jsx("button",{type:"button",onClick:()=>o(!1),className:"px-2 py-1 text-xs font-medium rounded transition-colors",style:{color:"var(--ws-text-muted)"},children:"Cancel"})]}):e.jsx("button",{type:"button",onClick:()=>o(!0),className:"p-1.5 rounded transition-colors",style:{color:"var(--ws-text-faint)"},title:"Delete",children:e.jsx(z,{className:"w-4 h-4"})})}function k({className:s}){return e.jsx("svg",{className:s,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}function W({className:s,style:n}){return e.jsx("svg",{className:s,style:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})})}function $({className:s}){return e.jsx("svg",{className:s,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}function z({className:s}){return e.jsx("svg",{className:s,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}export{R as CollectionsPage};
